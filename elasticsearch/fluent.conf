<source>
  type tail
  path /var/log/logging-containers/*.log
  pos_file /var/log/logging-containers/fluentd-containers.pos
  time_format %Y-%m-%dT%H:%M:%S
  tag container.*
  format json
  read_from_head true
</source>

<source>
  type tail
  path /var/log/logging-volumes/*.log
  pos_file /var/log/logging-volumes/fluentd-volumes.pos
  time_format %Y-%m-%dT%H:%M:%S
  tag volume.*
  format json
  read_from_head true
</source>

<filter volume.**>
  @type parser
  format json
  key_name params
  reserve_data false
</filter>

<match container.**>
  @type elasticsearch
  logstash_format true
  logstash_prefix docker_logs
  host elasticsearch.rancher.internal
  port 9200
</match>

<match volume.**>
  @type elasticsearch
  logstash_format true
  logstash_prefix app_logs
  tag_key _key
  host elasticsearch.rancher.internal
  port 9200
</match>
